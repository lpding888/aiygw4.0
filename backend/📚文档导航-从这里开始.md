# 📚 AI衣柜后端 - 文档导航（从这里开始）

艹！老王我把所有文档都整理好了，看你需要什么！

---

## 🚀 新手必看（按顺序看）

### 1️⃣ 第一次使用？👉 看这个！
**📄 [快速开始.md](./快速开始.md)** ⭐⭐⭐⭐⭐
- ⚡ 3个命令启动后端
- ✅ 验证是否成功
- 🧪 测试登录流程
- 🐛 常见问题解答

**预计用时：5分钟**

### 2️⃣ 想深入了解？👉 看这个！
**📄 [后端完全使用说明.md](./后端完全使用说明.md)** ⭐⭐⭐⭐⭐
- 📚 这个后端是干什么的？
- 🏗️ 整体架构说明
- 🎯 核心功能详解（认证、任务、会员、分销）
- 💾 数据库结构
- ❓ 20+常见问题解答

**预计用时：30分钟**

### 3️⃣ 需要调用API？👉 看这个！
**📄 [API速查表.md](./API速查表.md)** ⭐⭐⭐⭐⭐
- 🔑 认证接口（发送验证码、登录）
- 👤 用户接口（获取信息、更新）
- 🎨 任务接口（创建任务、查询状态）
- 💎 会员接口（购买、查询）
- 💰 分销接口（推荐、提现）
- 🔧 管理后台接口

**预计用时：10分钟（需要时查）**

---

## 📖 进阶专题文档

### 认证系统深入
**📄 [README_AUTH_API.md](./README_AUTH_API.md)**
- Cookie设置详情（HttpOnly、Secure）
- JWT认证中间件使用
- 登录注册完整流程
- Token刷新机制
- 前端集成示例

### FORK/JOIN并行执行（重要！）
**📄 [README_FORK_JOIN.md](./README_FORK_JOIN.md)**
- FORK节点并行执行原理
- JOIN等待策略（ALL/ANY/FIRST）
- 错误隔离机制
- 2个BUG修复说明
- 完整实现报告
- 数据库Migration说明

### 测试指南
**📄 [tests/README_TESTING.md](./tests/README_TESTING.md)**
- 方案1：纯Mock测试（不需要数据库）⭐推荐
- 方案2：集成测试（需要数据库）
- 测试用户自动创建
- **不需要真实账号密码！**

---

## 🎯 我想要... （按需查找）

| 我想要... | 👉 看这个文档 | 章节 |
|----------|-------------|------|
| **快速启动项目** | [快速开始.md](./快速开始.md) | 第1-3步 |
| **了解整体架构** | [后端完全使用说明.md](./后端完全使用说明.md) | 整体架构 |
| **调用登录接口** | [API速查表.md](./API速查表.md) | 认证接口 |
| **创建AI任务** | [API速查表.md](./API速查表.md) | 任务接口 |
| **配置Pipeline** | [后端完全使用说明.md](./后端完全使用说明.md) | Q4 |
| **添加新AI功能** | [后端完全使用说明.md](./后端完全使用说明.md) | Q5 |
| **运行测试** | [tests/README_TESTING.md](./tests/README_TESTING.md) | 方案1 |
| **解决启动报错** | [快速开始.md](./快速开始.md) | 常见问题 |
| **理解FORK/JOIN** | [README_FORK_JOIN.md](./README_FORK_JOIN.md) | 核心功能 |
| **前端对接** | [API速查表.md](./API速查表.md) | 全部 |

---

## 🎓 推荐学习路径

### 路径A：只想快速用起来（10分钟）
```
1. 📄 快速开始.md（启动项目）
2. 📄 API速查表.md（测试登录接口）
3. ✅ 开始开发
```

### 路径B：想深入理解（30分钟）
```
1. 📄 快速开始.md（启动项目）
2. 📄 后端完全使用说明.md（阅读前3章）
3. 📄 API速查表.md（熟悉API）
4. ✅ 开始开发
```

### 路径C：要添加新功能（1小时）
```
1. 📄 后端完全使用说明.md（完整阅读）
2. 📄 README_FORK_JOIN.md（了解Pipeline）
3. 📄 后端完全使用说明.md（Q5：添加新功能）
4. ✅ 开始开发
```

---

## 🔥 超快命令备忘录

```bash
# 一键启动全部
docker-compose -f docker-compose.dev.yml up -d && cd backend && npm run dev

# 查看数据库
docker exec -it ai-photo-mysql-dev mysql -uroot -pdev_password_123 ai_photo

# 运行测试（不需要数据库）
npm test -- pipelineEngine.simple.test.js

# 创建管理员
docker exec -it ai-photo-mysql-dev mysql -uroot -pdev_password_123 -e \
  "UPDATE ai_photo.users SET role='admin' WHERE phone='13800138000';"

# 查看日志
tail -f logs/app.log
```

---

## 📂 文档清单

### ⭐ 核心文档（新手必看）
- ✅ [快速开始.md](./快速开始.md) - 5分钟上手
- ✅ [后端完全使用说明.md](./后端完全使用说明.md) - 零基础教程
- ✅ [API速查表.md](./API速查表.md) - 接口速查

### 📖 专题文档
- ✅ [README_AUTH_API.md](./README_AUTH_API.md) - 认证系统
- ✅ [README_FORK_JOIN.md](./README_FORK_JOIN.md) - 并行执行
- ✅ [tests/README_TESTING.md](./tests/README_TESTING.md) - 测试指南

### 📝 其他文档
- README.md - 原项目说明
- README_CMS_API.md - CMS API文档

---

## 💡 常见场景速查

### 场景1：第一次启动项目
```
1. 👉 快速开始.md（第1-3步）
2. 浏览器访问 http://localhost:3001/health
3. ✅ 看到 {"status":"ok"} 说明成功
```

### 场景2：测试登录功能
```
1. 👉 API速查表.md（认证接口）
2. POST /api/auth/send-code（发送验证码）
3. 查看后端日志获取验证码
4. POST /api/auth/login（登录）
5. ✅ 获得Token
```

### 场景3：创建AI任务
```
1. 先登录获取Token
2. 👉 API速查表.md（任务接口）
3. POST /api/tasks（创建任务）
4. GET /api/tasks/:id/status（查询状态）
5. ✅ 获取结果
```

### 场景4：数据库连接失败
```
1. 👉 快速开始.md（常见问题 Q2）
2. 检查 docker ps
3. 确认MySQL容器运行
4. ✅ 重启容器
```

---

## ⚠️ 重要提示

### 关于账号密码
**❌ 不需要真实账号密码！**
- 开发环境验证码在后端日志里
- 测试用手机号：`13800138000`
- 测试自动创建假用户，无需注册

详见：[tests/README_TESTING.md](./tests/README_TESTING.md)

### 关于数据库
**⚠️ 必须先启动Docker**
```bash
docker-compose -f docker-compose.dev.yml up -d
```
否则后端无法启动！

详见：[快速开始.md](./快速开始.md) 第1步

### 关于验证码
**开发环境看后端日志：**
```
[AUTH] 发送验证码: phone=xxx code=123456
```
不需要真实短信！

---

## 🎉 开始你的旅程

**第一次使用？从这里开始 👇**

```bash
# 步骤1：启动数据库
docker-compose -f docker-compose.dev.yml up -d

# 步骤2：安装依赖并创建表
cd backend
npm install
npm run db:migrate

# 步骤3：启动后端
npm run dev

# 步骤4：验证
# 浏览器访问 http://localhost:3001/health
```

**✅ 启动成功！接下来看 📄 [API速查表.md](./API速查表.md) 测试接口！**

---

**艹！老王我把导航整理好了！从哪看都行！有问题随时找我！💪**
