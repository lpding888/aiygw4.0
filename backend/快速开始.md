# åç«¯å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰

è‰¹ï¼è€ç‹æˆ‘ç»™ä½ æœ€ç®€å•çš„å¯åŠ¨æ­¥éª¤ï¼Œè·Ÿç€åšå°±è¡Œï¼

---

## âš¡ è¶…å¿«å¯åŠ¨ï¼ˆ3ä¸ªå‘½ä»¤æå®šï¼‰

### ç¬¬1æ­¥ï¼šå¯åŠ¨æ•°æ®åº“ï¼ˆå¿…é¡»å…ˆåšï¼‰

```bash
# ç¡®ä¿Docker Desktopå·²å¯åŠ¨
# ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š
docker-compose -f docker-compose.dev.yml up -d
```

**ç­‰å¾…10ç§’ï¼Œæ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š**
```bash
docker ps
```

**åº”è¯¥çœ‹åˆ°3ä¸ªå®¹å™¨éƒ½æ˜¯`Up`çŠ¶æ€ï¼š**
- `ai-photo-mysql-dev`
- `ai-photo-redis-dev`
- `ai-photo-minio-dev`

### ç¬¬2æ­¥ï¼šåˆ›å»ºæ•°æ®åº“è¡¨

```bash
cd backend
npm install         # ç¬¬ä¸€æ¬¡éœ€è¦å®‰è£…ä¾èµ–
npm run db:migrate  # åˆ›å»ºæ‰€æœ‰è¡¨
```

**æˆåŠŸæ ‡å¿—ï¼š**
```
âœ“ Batch 1 run: 20 migrations
```

### ç¬¬3æ­¥ï¼šå¯åŠ¨åç«¯

```bash
npm run dev
```

**æˆåŠŸæ ‡å¿—ï¼š**
```
[SERVER] ğŸš€ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
[SERVER] ğŸ”— URL: http://localhost:3001
```

---

## âœ… éªŒè¯æ˜¯å¦æˆåŠŸ

**æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**
```
http://localhost:3001/health
```

**åº”è¯¥çœ‹åˆ°ï¼š**
```json
{
  "status": "ok",
  "timestamp": "2025-11-01T..."
}
```

---

## ğŸ§ª æµ‹è¯•ä¸€ä¸‹ç™»å½•æµç¨‹

### æ­¥éª¤1ï¼šå‘é€éªŒè¯ç 

```bash
curl -X POST http://localhost:3001/api/auth/send-code \
  -H "Content-Type: application/json" \
  -d "{\"phone\":\"13800138000\"}"
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "éªŒè¯ç å·²å‘é€"
}

**æŸ¥çœ‹éªŒè¯ç ï¼ˆçœ‹åç«¯æ—¥å¿—ï¼‰ï¼š**
åç«¯æ§åˆ¶å°ä¼šæ‰“å°ï¼š
```
[AUTH] å‘é€éªŒè¯ç : phone=13800138000 code=123456
```

### æ­¥éª¤2ï¼šç™»å½•

```bash
# æŠŠä¸Šé¢çœ‹åˆ°çš„éªŒè¯ç å¡«è¿›å»
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d "{\"phone\":\"13800138000\",\"code\":\"123456\"}"
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "user": {...},
    "token": "eyJhbGci..."
  }
}
```

**è‰¹ï¼ç™»å½•æˆåŠŸï¼Œè‡ªåŠ¨åˆ›å»ºäº†ç”¨æˆ·ï¼**

---

## ğŸ“± å¯åŠ¨å®Œæ•´ç³»ç»Ÿï¼ˆåç«¯+å‰ç«¯ï¼‰

### 1. åç«¯ï¼ˆå·²å¯åŠ¨ï¼Œä¿æŒè¿è¡Œï¼‰
```bash
cd backend
npm run dev
# ç›‘å¬ http://localhost:3001
```

### 2. å‰ç«¯ï¼ˆæ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰
```bash
cd frontend
npm install
npm run dev
# è®¿é—® http://localhost:3000
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: docker-composeå‘½ä»¤æ‰¾ä¸åˆ°ï¼Ÿ
**A:** å®‰è£…Docker Desktopï¼šhttps://www.docker.com/products/docker-desktop

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
**A:** æ£€æŸ¥Dockerå®¹å™¨æ˜¯å¦å¯åŠ¨ï¼š
```bash
docker ps
# åº”è¯¥çœ‹åˆ°ai-photo-mysql-devåœ¨è¿è¡Œ
```

### Q: ç«¯å£3001è¢«å ç”¨ï¼Ÿ
**A:** ä¿®æ”¹`.env`æ–‡ä»¶ä¸­çš„`PORT=3001`æ”¹æˆå…¶ä»–ç«¯å£

### Q: éªŒè¯ç åœ¨å“ªé‡Œçœ‹ï¼Ÿ
**A:** å¼€å‘ç¯å¢ƒéªŒè¯ç æ‰“å°åœ¨åç«¯æ§åˆ¶å°ï¼Œæ‰¾è¿™è¡Œï¼š
```
[AUTH] å‘é€éªŒè¯ç : phone=xxx code=123456
```

### Q: æ€ä¹ˆåˆ›å»ºç®¡ç†å‘˜ï¼Ÿ
**A:**
```bash
# å…ˆæ­£å¸¸ç™»å½•ä¸€æ¬¡åˆ›å»ºç”¨æˆ·
# ç„¶åè¿æ¥æ•°æ®åº“ä¿®æ”¹è§’è‰²
docker exec -it ai-photo-mysql-dev mysql -uroot -pdev_password_123

USE ai_photo;
UPDATE users SET role='admin' WHERE phone='13800138000';
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

âœ… å·²å¯åŠ¨æˆåŠŸï¼Œæƒ³æ·±å…¥äº†è§£ï¼Ÿçœ‹è¿™äº›ï¼š

1. **APIæ–‡æ¡£** â†’ `README_AUTH_API.md`
2. **å®Œæ•´è¯´æ˜** â†’ `åç«¯å®Œå…¨ä½¿ç”¨è¯´æ˜.md`
3. **FORK/JOIN** â†’ `README_FORK_JOIN.md`
4. **æµ‹è¯•æŒ‡å—** â†’ `tests/README_TESTING.md`

---

## ğŸ¯ æ¯å¤©å¼€å‘æµç¨‹

```bash
# 1. å¯åŠ¨Dockerï¼ˆå¦‚æœæ²¡å¯åŠ¨ï¼‰
docker-compose -f docker-compose.dev.yml up -d

# 2. å¯åŠ¨åç«¯
cd backend && npm run dev

# 3. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend && npm run dev

# 4. å¼€å§‹å†™ä»£ç ï¼
```

---

## ğŸ’¡ å¿«é€Ÿå‘½ä»¤å¤‡å¿˜å½•

```bash
# æŸ¥çœ‹æ•°æ®åº“
docker exec -it ai-photo-mysql-dev mysql -uroot -pdev_password_123 ai_photo

# æŸ¥çœ‹Redis
docker exec -it ai-photo-redis-dev redis-cli

# åœæ­¢æ‰€æœ‰å®¹å™¨
docker-compose -f docker-compose.dev.yml down

# æŸ¥çœ‹åç«¯æ—¥å¿—
cd backend && npm run dev

# è¿è¡Œæµ‹è¯•
cd backend && npm test

# åˆ›å»ºæ–°çš„æ•°æ®åº“è¿ç§»
cd backend && npm run db:migrate:make -- è¿ç§»åç§°
```

---

**è‰¹ï¼å°±è¿™ä¹ˆç®€å•ï¼æœ‰é—®é¢˜æ‰¾è€ç‹æˆ‘ï¼ğŸ’ª**
