# ğŸ§ª QA / è‡ªåŠ¨åŒ–éªŒæ”¶æµ‹è¯•

> **çŠ¶æ€**ï¼šå¼€å‘ä¸­ï¼ˆTODOï¼‰

## ğŸ“‹ ç›®å½•èŒè´£

æœ¬ç›®å½•ç”¨äºå­˜æ”¾è´¨é‡ä¿è¯å’Œè‡ªåŠ¨åŒ–éªŒæ”¶æµ‹è¯•è„šæœ¬ï¼ŒåŒ…æ‹¬ï¼š

- **APIå›å½’æµ‹è¯•**ï¼šæ¥å£åŠŸèƒ½éªŒè¯
- **é…é¢æ‰£å‡/è¿”è¿˜æµ‹è¯•**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘éªŒè¯
- **æ€§èƒ½æµ‹è¯•**ï¼šç³»ç»Ÿæ€§èƒ½åŸºå‡†æµ‹è¯•
- **éªŒæ”¶è‡ªåŠ¨åŒ–**ï¼šCI/CDé›†æˆæµ‹è¯•

## ğŸ¯ é¢„æœŸæµ‹è¯•è¦†ç›–

### ğŸ”§ APIæ¥å£æµ‹è¯•
```bash
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ auth.test.js           # è®¤è¯æ¥å£æµ‹è¯•
â”‚   â”œâ”€â”€ users.test.js          # ç”¨æˆ·ç®¡ç†æµ‹è¯•
â”‚   â”œâ”€â”€ tasks.test.js          # ä»»åŠ¡ç®¡ç†æµ‹è¯•
â”‚   â”œâ”€â”€ orders.test.js         # è®¢å•ç®¡ç†æµ‹è¯•
â”‚   â””â”€â”€ upload.test.js         # æ–‡ä»¶ä¸Šä¼ æµ‹è¯•
```

### ğŸ’° æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æµ‹è¯•
```bash
â”œâ”€â”€ business/
â”‚   â”œâ”€â”€ quota.test.js          # é…é¢ç®¡ç†æµ‹è¯•
â”‚   â”œâ”€â”€ billing.test.js        # è®¡è´¹é€»è¾‘æµ‹è¯•
â”‚   â”œâ”€â”€ payment.test.js        # æ”¯ä»˜æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ refund.test.js         # é…é¢è¿”è¿˜æµ‹è¯•
```

### ğŸš€ æ€§èƒ½æµ‹è¯•
```bash
â”œâ”€â”€ performance/
â”‚   â”œâ”€â”€ load.test.js           # è´Ÿè½½æµ‹è¯•
â”‚   â”œâ”€â”€ stress.test.js         # å‹åŠ›æµ‹è¯•
â”‚   â”œâ”€â”€ concurrent.test.js     # å¹¶å‘æµ‹è¯•
â”‚   â””â”€â”€ benchmark.js           # åŸºå‡†æµ‹è¯•
```

### ğŸ¨ å‰ç«¯é›†æˆæµ‹è¯•
```bash
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ e2e/                   # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ components/            # ç»„ä»¶æµ‹è¯•
â”‚   â””â”€â”€ integration/           # é›†æˆæµ‹è¯•
```

## âœ… éªŒæ”¶æ ‡å‡†

### ğŸ¯ åŠŸèƒ½éªŒæ”¶æ¸…å•
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•ï¼ˆæ‰‹æœºå·+éªŒè¯ç ï¼‰
- [ ] ä¼šå‘˜è´­ä¹°ï¼ˆæ”¯ä»˜æˆåŠŸâ†’é…é¢åˆ°è´¦100æ¬¡ï¼‰
- [ ] åŸºç¡€ä¿®å›¾åŠŸèƒ½ï¼ˆä¸Šä¼ â†’ç”Ÿæˆç™½åº•ä¸»å›¾â†’æ‰£1æ¬¡ï¼‰
- [ ] AIæ¨¡ç‰¹ç”ŸæˆåŠŸèƒ½ï¼ˆä¸Šä¼ â†’12å¼ åˆ†é•œâ†’æ‰£1æ¬¡ï¼‰
- [ ] å¤±è´¥å¤„ç†ï¼ˆé…é¢è‡ªåŠ¨è¿”è¿˜ï¼‰
- [ ] ç®¡ç†åå°ï¼ˆç”¨æˆ·/ä»»åŠ¡æŸ¥è¯¢ï¼‰

### ğŸ“Š æ€§èƒ½è¦æ±‚
- **åŸºç¡€ä¿®å›¾å“åº”æ—¶é—´**: < 5ç§’ï¼ˆP95ï¼‰
- **AIæ¨¡ç‰¹ç”Ÿæˆæ—¶é—´**: < 3åˆ†é’Ÿï¼ˆP95ï¼‰
- **ä»»åŠ¡åˆ—è¡¨åŠ è½½**: < 1ç§’
- **APIå“åº”æ—¶é—´**: < 500msï¼ˆP95ï¼‰
- **å¹¶å‘ç”¨æˆ·æ”¯æŒ**: 1000+ å¹¶å‘

### ğŸ”’ å®‰å…¨æµ‹è¯•è¦æ±‚
- [ ] SQLæ³¨å…¥é˜²æŠ¤æµ‹è¯•
- [ ] XSSæ”»å‡»é˜²æŠ¤æµ‹è¯•
- [ ] è®¤è¯æˆæƒæµ‹è¯•
- [ ] APIè®¿é—®æ§åˆ¶æµ‹è¯•
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†æµ‹è¯•

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹

### é…é¢ç®¡ç†æµ‹è¯•
```javascript
describe('é…é¢ç®¡ç†æµ‹è¯•', () => {
  test('ç”¨æˆ·è´­ä¹°ä¼šå‘˜åé…é¢å¢åŠ 100æ¬¡', async () => {
    // Given: ç”¨æˆ·åˆå§‹é…é¢ä¸º0
    // When: ç”¨æˆ·è´­ä¹°ä¼šå‘˜æˆåŠŸ
    // Then: ç”¨æˆ·é…é¢å˜ä¸º100æ¬¡
  });

  test('ä»»åŠ¡åˆ›å»ºæ—¶é¢„æ‰£é…é¢', async () => {
    // Given: ç”¨æˆ·æœ‰è¶³é¢é…é¢
    // When: åˆ›å»ºä»»åŠ¡
    // Then: é…é¢é¢„æ‰£ï¼Œä»»åŠ¡çŠ¶æ€ä¸ºprocessing
  });

  test('ä»»åŠ¡å¤±è´¥æ—¶é…é¢è‡ªåŠ¨è¿”è¿˜', async () => {
    // Given: ä»»åŠ¡åˆ›å»ºå¹¶é¢„æ‰£é…é¢
    // When: ä»»åŠ¡å¤„ç†å¤±è´¥
    // Then: é…é¢è‡ªåŠ¨è¿”è¿˜åˆ°ç”¨æˆ·è´¦æˆ·
  });
});
```

### APIæ¥å£æµ‹è¯•
```javascript
describe('ç”¨æˆ·è®¤è¯APIæµ‹è¯•', () => {
  test('æ‰‹æœºå·éªŒè¯ç ç™»å½•æˆåŠŸ', async () => {
    const response = await request(app)
      .post('/auth/login')
      .send({
        phone: '13800138000',
        code: '123456'
      });

    expect(response.status).toBe(200);
    expect(response.body.data.token).toBeDefined();
  });

  test('æ— æ•ˆéªŒè¯ç ç™»å½•å¤±è´¥', async () => {
    const response = await request(app)
      .post('/auth/login')
      .send({
        phone: '13800138000',
        code: '000000'
      });

    expect(response.status).toBe(400);
    expect(response.body.message).toContain('éªŒè¯ç é”™è¯¯');
  });
});
```

## ğŸš€ è‡ªåŠ¨åŒ–æ‰§è¡Œ

### æœ¬åœ°æµ‹è¯•æ‰§è¡Œ
```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
npm install --save-dev jest supertest

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
npm test -- --testNamePattern="é…é¢ç®¡ç†"

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:performance
```

### CI/CDé›†æˆ
```yaml
# .github/workflows/test.yml
name: è‡ªåŠ¨åŒ–æµ‹è¯•
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - run: npm install
      - run: npm test
      - run: npm run test:coverage
      - run: npm run test:e2e
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### è¦†ç›–ç‡è¦æ±‚
- **ä»£ç è¦†ç›–ç‡**: â‰¥ 80%
- **åˆ†æ”¯è¦†ç›–ç‡**: â‰¥ 75%
- **å‡½æ•°è¦†ç›–ç‡**: â‰¥ 90%
- **è¡Œè¦†ç›–ç‡**: â‰¥ 85%

### æŠ¥å‘Šç”Ÿæˆ
```bash
# ç”ŸæˆHTMLè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage:html

# ç”Ÿæˆæµ‹è¯•ç»“æœæŠ¥å‘Š
npm run test:report

# ç”Ÿæˆæ€§èƒ½æµ‹è¯•æŠ¥å‘Š
npm run test:performance:report
```

## ğŸ”§ æµ‹è¯•ç¯å¢ƒé…ç½®

### æµ‹è¯•æ•°æ®åº“
```bash
# æµ‹è¯•ç¯å¢ƒæ•°æ®åº“
TEST_DB_HOST=localhost
TEST_DB_USER=test_user
TEST_DB_PASSWORD=test_password
TEST_DB_NAME=ai_photo_test

# æµ‹è¯•æ•°æ®æ¸…ç†
npm run test:db:reset
npm run test:db:seed
```

### MockæœåŠ¡
```javascript
// mock/runningHub.js
export const mockRunningHubAPI = {
  getStatus: jest.fn().mockResolvedValue({
    status: 'success',
    resultUrls: ['https://example.com/result.jpg']
  }),

  createTask: jest.fn().mockResolvedValue({
    taskId: 'mock-task-id',
    status: 'processing'
  })
};
```

## ğŸ“ è´¨é‡åé¦ˆ

### ğŸ› BugæŠ¥å‘Šæµç¨‹
1. åœ¨æµ‹è¯•ä¸­å‘ç°é—®é¢˜
2. åˆ›å»ºè¯¦ç»†çš„é—®é¢˜æŠ¥å‘Š
3. åˆ†é…ç»™ç›¸å…³å¼€å‘äººå‘˜
4. éªŒè¯ä¿®å¤æ•ˆæœ
5. æ›´æ–°æµ‹è¯•ç”¨ä¾‹

### ğŸ“ˆ æŒç»­æ”¹è¿›
- å®šæœŸå›é¡¾æµ‹è¯•è¦†ç›–ç‡
- ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ•ˆç‡
- æ›´æ–°æµ‹è¯•ç”¨ä¾‹åº“
- æ”¹è¿›æµ‹è¯•å·¥å…·é“¾

---

**é‡è¦æé†’**ï¼šæµ‹è¯•æ˜¯è´¨é‡ä¿éšœçš„æœ€åä¸€é“é˜²çº¿ï¼Œè¯·ç¡®ä¿æ‰€æœ‰å…³é”®ä¸šåŠ¡é€»è¾‘éƒ½æœ‰å……åˆ†çš„æµ‹è¯•è¦†ç›–ï¼