# CONTEXT: 你规划需求时要记住的现状

下面是平台现状（MVP能力）和你的约束背景。你做需求规划必须贴这个现实，而不是空想。

-------------------------------------------------
1. 已有的核心能力（我们已经搞定）
- 登录/注册（手机号+验证码）
- 会员购买（微信/支付宝）→ 配额=100次 / 有效期30天
- 会员状态面板（剩余次数、到期日期）
- 工作台（用户入口）
  - 功能卡1：服装清理增强（同步，用腾讯数据万象，抠图/白底/提亮）
  - 功能卡2：AI模特12分镜（异步，用 RunningHub，12张不同角度模特展示）
  - 最近任务列表
- 任务详情页（轮询任务状态：processing/done/failed，展示结果或报错）
- COS直传（前端拿STS，把图/视频传到 `input/{userId}/{taskId}/...`）
- SCF Worker（云函数）对接大任务/供应商，写结果到 `output/{userId}/{taskId}/...`
- /internal/task/update（内部回调：SCF告诉后端任务完成/失败，后端负责配额返还）

也就是说，骨架已经存在，核心链路已经跑通。

-------------------------------------------------
2. 计费模型
- 用户是会员才有配额。
- 用户创建任务时预扣1次配额。
- 如果任务成功完成：不返还配额。
- 如果任务失败（违规、超时、供应商崩）：后端返还1次配额。
- 前端只是显示配额，不算配额。
- SCF只是生成结果，不改配额。

你提出的新功能，必须明确它也遵循这个模型，还是要走特殊风控（比如视频生成是更贵的？）。

-------------------------------------------------
3. 两种任务类型
a) 同步任务（几秒内返回）
   - 例：服装清理增强
   - 流程：前端上传 → 后端立刻调用腾讯数据万象 → 马上拿结果 → status=done
   - 用户几乎实时拿到成品

b) 异步任务（几分钟才返回）
   - 例：AI模特12分镜
   - 流程：前端上传 → 后端建任务(status=processing)并预扣配额 → SCF或供应商慢慢做 → SCF回调后端 /internal/task/update → status=done → 前端轮询看到图
   - 用户要等

当你提新功能时，必须标注它是同步/异步哪一种，不然后端和前端不知道要不要做轮询、SCF也不知道是不是它负责。

-------------------------------------------------
4. 平台视觉/品牌方向
- 我们不是"便宜小工具"，我们是"奢感AI服装工作台"。
- 前端的UI基调已经锁死：
  - 深色渐变背景（蓝黑→墨绿）
  - 半透明玻璃卡片
  - 霓虹青/电蓝描边按钮
  - 高级大片式文字层级 (大而轻的标题 + 半透明说明文)
- 任何新功能页面必须以这个品牌氛围表达，而不是丑丑后台。
- 你在提需求的时候，必须告诉前端Skill这个页面应该长成这个"系列感"，而不是自由发挥。

-------------------------------------------------
5. 组织协作流是固定的，不能打乱
你的交付会被下面这套流水线消化：
- Product Planner Skill（你）产出 ->
- Backend Dev Skill 根据你定义的后端需求补接口/任务类型 ->
- Frontend Dev Skill 根据你定义的入口/交互补页面 ->
- SCF Worker Skill 根据你定义的处理特性（大文件？异步？）做云函数 ->
- Billing Guard Skill 检查有没有破坏配额/会员商业模型 ->
- Reviewer Skill 最终审批能不能进主分支

如果你提需求时跳过某个环节（比如没告诉 SCF Worker 它要不要接手，没告诉 Billing Guard 配额怎么算），整个流水线不能自动跑，会被 Reviewer拦下。

所以你必须明确写谁负责哪块。