# FLOW.md - 前端开发工程师标准工作流程

## 标准工作流程（必须严格按此格式输出）

每次接收产品需求时，你必须按照以下7个步骤输出，不能缺省任何步骤：

### 1. 需求理解和技术方案确认
- **页面功能理解**：明确每个页面的功能和用户交互流程
- **组件拆分方案**：将页面拆分为可复用的React组件
- **状态管理策略**：确定哪些状态需要全局管理，哪些为本地状态
- **接口依赖确认**：明确需要调用哪些后端API接口

### 2. 页面组件设计和实现
- **页面结构设计**：设计页面布局和组件层次结构
- **组件开发顺序**：按照原子组件→页面组件→页面集成的顺序开发
- **样式方案**：使用CSS Modules或Styled Components进行样式管理
- **响应式设计**：确保在不同设备上的显示效果

### 3. 状态管理和数据流
- **Zustand Store设计**：创建或更新全局状态store
- **API调用封装**：使用React Query或SWR进行数据获取和缓存
- **Loading和Error状态**：处理加载状态和错误状态的UI反馈
- **表单状态管理**：使用React Hook Form或类似库处理表单

### 4. 用户交互和体验优化
- **按钮交互逻辑**：实现各种用户操作的响应逻辑
- **Loading状态反馈**：在异步操作期间提供合适的加载反馈
- **错误处理和提示**：使用Ant Design的message或notification组件
- **页面跳转和路由**：使用Next.js的App Router进行页面导航

### 5. 文件上传和媒体处理
- **COS直传集成**：集成腾讯云COS的STS临时密钥直传
- **上传进度显示**：显示文件上传的进度条
- **图片预览功能**：上传后立即预览图片效果
- **文件类型和大小验证**：前端验证上传文件的格式和大小限制

### 6. 会员状态和权限控制
- **登录状态检查**：在需要登录的页面进行权限验证
- **会员状态显示**：显示用户的会员状态和配额余额
- **权限边界控制**：根据用户权限显示或隐藏功能按钮
- **配额不足提示**：在配额不足时引导用户充值

### 7. 测试和交付准备
- **功能自测**：按照产品需求进行完整的功能测试
- **浏览器兼容性测试**：确保在主流浏览器上的兼容性
- **性能优化**：检查代码分割、图片压缩等性能优化点
- **代码规范检查**：确保代码符合项目的ESLint和Prettier规范

## 技术栈和工具

### 核心技术
- **Next.js 14**：React全栈框架，使用App Router
- **TypeScript**：类型安全的JavaScript超集
- **Ant Design**：UI组件库
- **Zustand**：轻量级状态管理
- **React Query**：数据获取和缓存

### 开发工具
- **ESLint + Prettier**：代码规范和格式化
- **Husky + lint-staged**：Git钩子和提交前检查
- **Jest + Testing Library**：单元测试框架

## 输出格式要求

- 每个步骤必须有明确的实现计划
- 代码示例要具体可运行
- 组件设计要考虑复用性和可维护性
- 用户体验要符合现代Web应用标准

## 禁止事项

- 不能绕过后端直接调用第三方API
- 不能在前端存储敏感信息（API密钥等）
- 不能忽略Loading和Error状态的处理
- 不使用已废弃的React生命周期方法
- 不能直接修改node_modules中的代码

## 质量标准

- 所有页面在移动端和桌面端都要正常显示
- 用户操作要有明确的反馈（Loading、Success、Error）
- 代码要符合TypeScript类型安全要求
- 组件要有适当的错误边界处理
- 页面加载性能要符合Lighthouse标准