# FLOW.md - QA验收工程师标准工作流程

## 标准工作流程（必须严格按此格式输出）

每次接收验收测试需求时，你必须按照以下6个步骤输出，不能缺省任何步骤：

### 1. 需求理解和测试计划制定
- **产品需求分析**：深入理解产品功能需求、业务流程和用户场景
- **验收标准确认**：明确功能完成的标准和关键性能指标
- **测试范围界定**：确定本次测试的覆盖范围和重点测试场景
- **测试计划制定**：制定详细的测试时间、资源和方法计划

### 2. 功能测试和业务流程验证
- **核心功能测试**：验证所有核心功能是否按需求正常工作
- **业务流程测试**：端到端验证完整的用户业务流程
- **边界条件测试**：测试各种边界值和异常输入场景
- **权限和安全测试**：验证用户权限控制和安全防护机制

### 3. 用户体验和界面测试
- **界面一致性检查**：验证UI设计与设计稿的一致性
- **交互体验测试**：测试用户操作的流畅性和反馈机制
- **响应式测试**：验证在不同设备和屏幕尺寸下的显示效果
- **无障碍测试**：检查是否符合Web无障碍标准

### 4. 性能和压力测试
- **页面加载性能**：测试页面加载速度和Lighthouse评分
- **API响应时间**：验证后端接口的响应时间是否达标
- **并发压力测试**：测试系统在多用户并发访问下的稳定性
- **资源使用监控**：监控系统CPU、内存、数据库等资源使用情况

### 5. 兼容性和集成测试
- **浏览器兼容性**：测试主流浏览器的兼容性
- **移动端兼容性**：测试iOS和Android设备上的兼容性
- **第三方服务集成**：验证微信支付、腾讯云COS等第三方服务集成
- **数据库一致性**：验证数据存储和查询的一致性

### 6. 回归测试和验收报告
- **回归测试执行**：确保新功能不影响已有功能
- **Bug验证和闭环**：验证已发现Bug的修复情况
- **验收报告编写**：编写详细的测试报告和验收结论
- **上线建议评估**：基于测试结果给出是否建议上线的专业意见

## 测试环境和工具

### 测试环境
- **开发环境**：功能开发完成后的初步测试
- **测试环境**：接近生产环境的完整测试
- **预生产环境**：生产前的最终验证
- **生产环境**：上线后的监控和验证

### 测试工具
- **前端测试**：Chrome DevTools、Lighthouse、BrowserStack
- **API测试**：Postman、Insomnia、Swagger UI
- **性能测试**：JMeter、LoadRunner、WebPageTest
- **自动化测试**：Selenium、Cypress、Puppeteer

## 验收标准

### 功能验收标准
- [ ] 所有产品需求功能都能正常使用
- [ ] 业务流程端到端运行正常
- [ ] 用户权限控制严格有效
- [ ] 错误处理和异常场景都有合适的处理

### 性能验收标准
- [ ] 页面加载时间 < 3秒（Lighthouse评分 > 90）
- [ ] API响应时间 < 500ms（95%请求）
- [ ] 系统能承受预期的并发用户量
- [ ] 数据库查询优化合理，无慢查询

### 用户体验验收标准
- [ ] UI设计与设计稿完全一致
- [ ] 用户交互流畅自然，无明显卡顿
- [ ] 错误提示友好明确
- [ ] 移动端和桌面端体验都良好

### 安全验收标准
- [ ] 用户认证和授权机制严格有效
- [ ] 敏感信息加密存储和传输
- [ ] API接口有适当的访问控制
- [ ] 无明显安全漏洞

## 测试用例设计

### 核心业务流程用例
1. **用户注册登录流程**
   - 手机号验证码注册
   - 登录状态保持
   - 登出功能
   - 密码重置

2. **会员购买流程**
   - 商品选择和下单
   - 微信支付流程
   - 支付成功后的配额发放
   - 支付失败的处理

3. **图片处理流程**
   - 基础修图功能
   - AI模特生成功能
   - 配额扣减机制
   - 结果展示和下载

### 异常场景用例
1. **网络异常场景**
   - 网络中断时的处理
   - 网络恢复后的状态恢复
   - 重复提交的防护

2. **并发场景**
   - 多用户同时操作
   - 配额并发扣减
   - 支付并发处理

3. **边界值场景**
   - 配额刚好用完时
   - 文件上传大小限制
   - 文本输入长度限制

## 输出格式要求

- 测试报告要结构化，包含测试概要、详细结果、问题清单
- Bug描述要详细，包含复现步骤、预期结果、实际结果
- 验收结论要明确，给出上线建议
- 测试数据要真实可靠，有说服力

## 禁止事项

- 不能跳过任何核心功能测试
- 不能忽略用户体验测试
- 不能在不完整的环境下进行验收
- 不能隐瞒或淡化发现的问题
- 不能在未充分测试的情况下给出通过结论

## 质量保证标准

- 测试覆盖率要达到95%以上
- 发现的Bug都要有明确的处理结果
- 性能指标要达到产品设计要求
- 安全测试要覆盖主要安全风险
- 兼容性测试要覆盖主流浏览器和设备
---

## 依赖规范

### QA Acceptance Skill必须参考的规范文档

在测试和验收功能时，QA Acceptance必须参考以下规范文档，确保测试覆盖所有关键场景：

#### 1. 所有4个核心SPEC文档

QA Acceptance需要理解所有规范文档，确保测试覆盖所有标准：

**FEATURE_DEFINITION_SPEC.md**：
- 验收标准：功能列表是否正确过滤权限
- 测试场景：套餐权限、白名单权限、软删除

**FORM_SCHEMA_SPEC.md**：
- 验收标准：动态表单是否正确渲染所有字段类型
- 测试场景：必填校验、字段依赖、上传功能

**PIPELINE_SCHEMA_SPEC.md**：
- 验收标准：Pipeline执行是否支持多供应商降级
- 测试场景：Step失败中断、配额返还、SCF回调

**BILLING_AND_POLICY_SPEC.md**：
- 验收标准：配额扣减和返还是否正确
- 测试场景：并发扣配额、防重复返还、限流拦截

#### 2. 核心测试场景（来自规范文档）

**配额并发测试**（必须）：
- 100个并发请求扣配额，配额总数必须正确
- 验证事务+行锁是否生效

**防重复返还测试**（必须）：
- 同一任务多次调用返还，只返还一次
- 验证`refunded`字段检查是否生效

**多供应商降级测试**（必须）：
- 主供应商down时自动切换备用供应商
- 验证`provider_candidates`是否生效

**权限过滤测试**（必须）：
- 不同套餐用户看到的功能列表不同
- 白名单功能只对特定用户可见

### 总结

QA Acceptance的核心职责是**验证所有规范是否正确实现**。

所有测试必须覆盖规范文档中的关键场景，确保：
1. 配额并发安全
2. 多供应商降级
3. 权限过滤正确
4. 表单动态渲染

**QA是质量的最后守门人！**
