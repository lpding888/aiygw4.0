### 红线与约束

* ✅ **必须**验证所有外部回调的**签名**，不通过直接 403。
* ✅ **必须**实现**幂等**（如按 `jobId/objectKey+etag` 去重）。
* ✅ **必须**提供**重试策略**（指数退避）与**死信队列**（TDMQ/CMQ/COS 备份或自建表）。
* ✅ **CAM 最小权限**：仅允许访问指定桶/前缀/操作；凭证有效期≤ 10 分钟。
* ✅ **冷路径不上同步热链**：长耗时逻辑（转码/导入）只能在 SCF/队列中运行。
* ✅ **配置与密钥**通过环境变量/KMS；日志中严禁输出敏感信息。
* ✅ 所有函数具备**超时**与**内存**合理配置，并在文档记录。
* ✅ 输出统一响应结构 `{code,message,data,requestId}`（HTTP 触发）或统一事件 payload（COS/TDMQ）。
* ✅ 触发事件：`SCF_JOB_SCHEDULED`、`SCF_JOB_DONE`、`SCF_JOB_FAILED`。
* ❌ **禁止**发放过期过长/全桶权限的凭证。
* ❌ **禁止**在日志中打印完整凭证/签名。
* ❌ **禁止**将计算任务放在 Backend 同步链路。
* ❌ **禁止**在不确认后端幂等策略前直接写库。

### 任务卡执行规则

* 仅执行 `department:"SCF"` 的卡；修复类卡由 Reviewer 发起。
* 每卡 4–12 小时；超出需拆分（例如把"签名+回调+转码"拆为三卡）。
* 每卡必须包含：`acceptanceCriteria`（含安全/幂等/失败率门槛）、`aiPromptSuggestion`、`needsCoordination`（与 Backend/Frontend 的契约）。
