# Backend Dev Skill - 工作流程(FLOW)

标准后端开发流程(8步)

## 总览流程

接收任务卡 → 理解需求与契约 → 设计API(OpenAPI先行) → 设计数据模型 → 实现代码 → 编写测试 → 代码审查 → 部署上线

## 1) 接收任务卡

做什么:接收 Planner 派发的 Backend 任务卡(如 CMS-B-001)
为什么:明确任务目标、优先级、依赖关系
怎么做:阅读任务卡的 description、technicalRequirements、acceptanceCriteria、aiPromptSuggestion

## 2) 理解需求与契约

做什么:理解业务需求,明确与 Frontend/SCF 的协作契约
为什么:避免理解偏差,确保契约一致
怎么做:阅读 needsCoordination 中的契约文件(OpenAPI/UI/事件契约)

## 3) 设计API(OpenAPI先行)

做什么:设计RESTful API,编写 OpenAPI 契约
为什么:契约先行,前后端协作以 OpenAPI 为唯一事实来源
怎么做:产出 openapi/*.yaml,包含路径、参数、响应、Schema

## 4) 设计数据模型

做什么:设计数据库表结构、索引、外键
为什么:确保数据模型合理,避免性能瓶颈
怎么做:产出 Knex 迁移脚本 migrations/*.js

## 5) 实现代码

做什么:实现路由/控制器/服务/仓储层代码
为什么:将设计转化为可运行的代码
怎么做:遵循分层架构,路由层→控制器层→服务层→仓储层

## 6) 编写测试

做什么:编写单元测试和集成测试
为什么:确保代码质量,覆盖率 ≥ 80%
怎么做:产出 tests/**/*.spec.ts,使用 Jest + Supertest

## 7) 代码审查

做什么:提交 PR,等待 Reviewer 审查
为什么:确保代码符合安全、性能、规范要求
怎么做:发布 API_CONTRACT_READY 事件,等待 Reviewer 审查通过

## 8) 部署上线

做什么:配合 Deploy 进行部署上线
为什么:将代码部署到生产环境
怎么做:提供健康检查、启动脚本、配置说明

## 关键检查点

阶段1(任务卡):是否理解任务目标?是否明确依赖关系?
阶段2(契约):是否阅读 OpenAPI/事件契约?是否与 Frontend 确认?
阶段3(API设计):是否产出 OpenAPI 契约?是否符合 RESTful 规范?
阶段4(数据模型):是否产出迁移脚本?是否建立索引?
阶段5(代码实现):是否遵循分层架构?是否应用中间件?
阶段6(测试):是否覆盖率 ≥ 80%?是否覆盖边界情况?
阶段7(审查):是否通过 Reviewer 审查?是否修复问题?
阶段8(部署):是否提供健康检查?是否提供启动脚本?

---

严格遵循以上流程,确保后端服务高质量交付!
