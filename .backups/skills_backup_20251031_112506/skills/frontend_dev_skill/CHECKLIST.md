# skills/frontend_dev_skill/CHECKLIST.md

> 提交 PR 之前逐条自检。带有"❌反例"的项尤其需要注意。

## A. 契约与类型

* [ ] 已收到 `API_CONTRACT_READY` 并关联任务卡。
* [ ] 已生成/更新 TS 类型（或手写但与 OpenAPI 一致）。
* [ ] 所有服务层调用使用 `client.ts`，未使用裸 `fetch`。
* [ ] 响应结构按 `{ code, message, data?, requestId }` 解析。

❌ 反例：`fetch(url).then(r=>r.json())` 后直接使用 `data.items`，未检查 `code`。

## B. UI/交互一致性

* [ ] 表单：必填校验/前端规则/提交 loading/禁用，错误提示明确。
* [ ] 表格：分页/排序/空态/错误态与刷新按钮。
* [ ] Modal：破坏性操作二次确认。
* [ ] Skeleton：列表/详情加载Skeleton。
* [ ] 国际化（如有）：文案从词典读取。

❌ 反例：删除无确认 → 误操作不可恢复。

## C. 状态与性能

* [ ] 全局状态仅存用户态/必要 UI 态；列表查询为局部 state。
* [ ] 使用 `useMemo/useCallback` 消除重渲染热区；
* [ ] 大组件按需动态加载；
* [ ] 列表大数据采用分页或虚拟滚动。

❌ 反例：全站状态存所有列表数据 → 内存与渲染抖动严重。

## D. 安全与访问控制

* [ ] 未登录访问受限页会跳转到登录；
* [ ] 角色控制隐藏/禁用敏感操作；
* [ ] 不在日志/报错中输出隐私/令牌；
* [ ] 上传前校验文件类型/大小；
* [ ] UI 不回显后端"内部错误详情"。

❌ 反例：将后端错误堆栈直接 toast 给用户。

## E. E2E 可测性

* [ ] 核心按钮/表单/表格有 `data-testid` 或 role/label；
* [ ] E2E 覆盖任务卡验收标准；
* [ ] 选择器稳健，不依赖样式 class/nth-child。

❌ 反例：E2E 使用 `.ant-btn:nth-child(2)`。

## F. 协作与交付

* [ ] 在面板记录 `API_CONTRACT_ACK` 与页面路径。
* [ ] PR 模板完整：截图、短视频（可选）、OpenAPI 版本、回滚策略。
* [ ] Reviewer/QA 的意见已逐项关闭；
* [ ] 若有高成本操作，提示消耗并做防抖/节流。
